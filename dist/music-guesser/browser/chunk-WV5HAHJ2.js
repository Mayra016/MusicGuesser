import{$ as u,A as x,B as c,C as p,E as A,F as E,G as k,H as L,J as j,K as D,L as N,O as z,Q as $,U as F,X as B,Z as m,_ as d,aa as f,ba as Y,c as S,ca as G,da as H,ea as q,ga as J,h as w,i as b,ja as M,ka as C,m as V,ma as n,n as r,na as R,oa as v,p as T,r as W,s as P,u as g,v as o,w as s,x as O,y as I,z as y}from"./chunk-XP2PXENC.js";var K={production:!0,functionsUrl:""};function ee(a,_){a&1&&(o(0,"div",19),O(1,"img",20),s())}function te(a,_){if(a&1){let e=I();o(0,"li")(1,"span",21),y("click",function(){let t=w(e).$implicit,l=x();return b(l.selectedSong(t))}),c(2),s()()}if(a&2){let e=_.$implicit;r(2),p(e)}}function ne(a,_){if(a&1){let e=I();o(0,"div",22)(1,"h1"),c(2),s(),o(3,"button",15),y("click",function(){w(e);let t=x();return b(t.nextLevel())}),c(4),s()()}if(a&2){let e=x();g("@fadeInOut",void 0),r(2),p(e.winTxt),r(2),p(e.nextTxt)}}function ie(a,_){if(a&1){let e=I();o(0,"div",23)(1,"h1"),c(2),s(),o(3,"p"),c(4),s(),o(5,"button",15),y("click",function(){w(e);let t=x();return b(t.playAgain())}),c(6),s()()}if(a&2){let e=x();g("@fadeInOut",void 0),r(2),p(e.lostTxt),r(2),A("",e.lostScore," ",e.score),r(2),p(e.playAgainTxt)}}function re(a,_){if(a&1&&O(0,"iframe",24),a&2){let e=x();g("src",e.musicVideoSrc,V)}}var We=(()=>{class a{cookies;route;httpClient;sanitizer;constructor(e,i,t,l){this.cookies=e,this.route=i,this.httpClient=t,this.sanitizer=l,this.translate(),this.generateLetters(),this.musicVideoSrc=this.sanitizer.bypassSecurityTrustResourceUrl("")}language="EN";letters="";availableLetters="ABCDEFGHIJKLMNOPQRSTUVWXZ";userWord="";music="";lyrics="";autocompleteApiURL=K.production?"/genius-api/search":"http://localhost:5001/YOUR-PROJECT/us-central1/geniusProxy/search";lyricsApiUrl="https://api.lyrics.ovh/v1";autocompleteResult={};songs=[];won=!1;lost=!1;score=0;lifes=3;minutes="00";seconds=60;animationState="none";musicVideo=!1;musicVideoSrc;Array=Array;titleTxt=m.gameTitle;wordTxt=m.wordTxt;sendTxt=m.send;scoreTxt="Score:";winTxt=m.win;nextTxt=m.next;lostTxt=m.lostTitle;lostScore=m.scoreText;playAgainTxt=m.playAgain;songTxt=m.songTxt;surrenderTxt=m.surrenderTxt;ngOnInit(){this.language=this.cookies.get("language")||this.route.snapshot.paramMap.get("lang")||"EN",this.translate(),this.timer()}timer(){return S(this,null,function*(){for(;this.seconds>0;)this.seconds<=10?this.animationState="shake":this.animationState="none",this.seconds--,yield new Promise(e=>setTimeout(e,1e3));this.lifes>1?(this.lifes--,this.animationState="none",yield new Promise(e=>setTimeout(e,2e3)),this.seconds=10,this.timer()):this.lost=!0})}translate(){this.language=="ES"||this.language=="Spanish"?(this.titleTxt=d.gameTitle,this.wordTxt=d.wordTxt,this.sendTxt=d.send,this.scoreTxt=d.score,this.winTxt=d.win,this.nextTxt=d.next,this.lostTxt=d.lostTitle,this.lostScore=d.scoreText,this.playAgainTxt=d.playAgain,this.songTxt=d.songTxt,this.surrenderTxt=d.surrenderTxt):this.language=="DE"||this.language=="German"?(this.titleTxt=u.gameTitle,this.wordTxt=u.wordTxt,this.sendTxt=u.send,this.scoreTxt=u.score,this.winTxt=u.win,this.nextTxt=u.next,this.lostTxt=u.lostTitle,this.lostScore=u.scoreText,this.playAgainTxt=u.playAgain,this.songTxt=d.songTxt,this.surrenderTxt=u.surrenderTxt):(this.language=="PT"||this.language=="Portuguese")&&(this.titleTxt=f.gameTitle,this.wordTxt=f.wordTxt,this.sendTxt=f.send,this.scoreTxt=f.score,this.winTxt=f.win,this.nextTxt=f.next,this.lostTxt=f.lostTitle,this.lostScore=f.scoreText,this.playAgainTxt=f.playAgain,this.songTxt=d.songTxt,this.surrenderTxt=f.surrenderTxt)}generateLetters(){this.letters+=this.availableLetters.charAt(Math.floor(Math.random()*this.availableLetters.length)),this.letters+=this.availableLetters.charAt(Math.floor(Math.random()*this.availableLetters.length))}selectedSong(e){let i=this.generateLinkToLyricsAPI(e);this.getLyrics(i)}generateLinkToLyricsAPI(e){this.music=e,e=e.replace(/\s+/g," ").trim();let i=e.lastIndexOf(" by "),t=e.substring(0,i).trim().replace(/ /g,"-"),l=e.substring(i+4).trim().replace(/ /g,"-");return console.log("M\xDASICA 0 "+l),console.log("M\xDASICA 1 "+t),console.log(`LINK ${this.lyricsApiUrl}/${encodeURIComponent(l)}/${encodeURIComponent(t)}`),`${this.lyricsApiUrl}/${encodeURIComponent(l)}/${encodeURIComponent(t)}`}getLyrics(e,i){this.httpClient.get(e).subscribe({next:t=>{this.lyrics=t.lyrics,console.log("HOLAAA"+this.lyrics)},error:t=>{this.music="",alert("Song not found!")}})}autocomplete(e){if(!e||e.trim()===""){this.songs=[];return}this.httpClient.get(`${this.autocompleteApiURL}${encodeURIComponent(e)}`).subscribe({next:i=>{console.log("API Response:",i.response.hits[0]),this.songs=i?.response?.hits?.map(t=>{let l=t.result.title+" by "+t.result.artist_names;return l.endsWith(" by Najwa")&&(l=l.replace("Najwa","Najwa Nimri")),l})||[]},error:i=>{console.error("API Error:",i),this.songs=[]}})}checkUserInput(){if(this.userWord=this.userWord.split(" ")[0].toUpperCase(),this.lyrics=this.lyrics.toUpperCase(),console.log("SCORE ANTES"+this.userWord),this.lyrics==""){let e=this.generateLinkToLyricsAPI(this.music);this.getLyrics(e,()=>{this.runChecks()})}else this.runChecks()}searchVideo(){return S(this,null,function*(){console.log("SEARCHING VIDEO");let e=this.music;e=e.replace(/\s+/g," ").trim();let i=e.lastIndexOf(" by "),t=e.substring(0,i).trim().replace(/ /g,"-"),h=e.substring(i+4).trim().replace(/ /g,"-")+t,Q="AIzaSyBJnRvYAq8_-a5EfbVdHhMRCbBEBc2VatI";console.log(h);let X=`https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&maxResults=1&q=${h}&key=${Q}`,U=yield(yield fetch(X)).json();if(U.items.length>0){let Z=U.items[0].id.videoId;this.sanitizer&&(this.musicVideoSrc=this.sanitizer.bypassSecurityTrustResourceUrl(`https://www.youtube.com/embed/${Z}?autoplay=0`),console.log(this.musicVideoSrc),this.musicVideo=!0)}})}runChecks(){(!this.userWord.includes(this.letters.charAt(0))||!this.userWord.includes(this.letters.charAt(1)))&&alert("The word doesn't contain the letters"),this.lyrics.includes(this.userWord)||alert("The lyrics doesn't contain the word"),this.userWord.includes(this.letters.charAt(0))&&this.userWord.includes(this.letters.charAt(1))&&this.lyrics.includes(this.userWord)?(this.searchVideo(),this.won=!0,this.score+=10,this.seconds=60):(this.lifes=this.lifes-1,this.lifes==0&&(this.lost=!0,this.score=0)),console.log("SCORE DESPU\xC9S"+this.score)}nextLevel(){this.won=!1,this.resetLevel()}playAgain(){this.lost=!1,this.resetLevel(),this.score=0,this.lifes=3,this.musicVideo=!1,this.timer()}resetLevel(){this.userWord="",this.music="",this.lyrics="",this.letters="",this.songs=[],this.autocompleteResult={},this.seconds=60,this.generateLetters()}static \u0275fac=function(i){return new(i||a)(T(Y),T(F),T(z),T($))};static \u0275cmp=W({type:a,selectors:[["app-play-component"]],decls:32,vars:18,consts:[[1,"container"],["id","play","routerLink","/",1,"secondary-font"],[1,"header"],[1,"score"],[1,"timer"],[1,"lifes-imgs"],["class","lifes",4,"ngFor","ngForOf"],[1,"instruction"],[1,"text"],[1,"letters-level"],[1,"game"],[1,"word-input"],["type","text","autocomplete","off",3,"ngModelChange","ngModel"],["type","text","name","music","placeholder","Song by artist","autocomplete","off",3,"ngModelChange","input","ngModel"],[4,"ngFor","ngForOf"],[1,"send-btn",3,"click"],["class","end-screen win-screen",4,"ngIf"],["class","end-screen lost-screen",4,"ngIf"],["width","auto","frameborder","0",3,"src",4,"ngIf"],[1,"lifes"],["src","assets/heart.png","alt","heart-image",1,"life"],[3,"click"],[1,"end-screen","win-screen"],[1,"end-screen","lost-screen"],["width","auto","frameborder","0",3,"src"]],template:function(i,t){i&1&&(o(0,"div",0)(1,"button",1),c(2),s(),o(3,"div",2)(4,"p",3),c(5),s(),o(6,"div",4)(7,"p"),c(8),s()(),o(9,"div",5),P(10,ee,2,0,"div",6),s()(),o(11,"div",7)(12,"h1",8),c(13),s(),o(14,"h2",9),c(15),s()(),o(16,"div",10)(17,"div",11)(18,"label"),c(19),s(),o(20,"input",12),L("ngModelChange",function(h){return k(t.userWord,h)||(t.userWord=h),h}),s()(),o(21,"div",11)(22,"label"),c(23),s(),o(24,"input",13),L("ngModelChange",function(h){return k(t.music,h)||(t.music=h),h}),y("input",function(){return t.autocomplete(t.music)}),s()(),o(25,"ul"),P(26,te,3,1,"li",14),s(),o(27,"button",15),y("click",function(){return t.checkUserInput()}),c(28),s()()(),P(29,ne,5,3,"div",16)(30,ie,7,5,"div",17)(31,re,1,1,"iframe",18)),i&2&&(r(2),p(t.surrenderTxt),r(3),A("",t.scoreTxt," ",t.score),r(),g("@shakeAnimation",t.animationState),r(2),A("",t.minutes," : ",t.seconds<10?"0"+t.seconds:t.seconds),r(2),g("ngForOf",t.Array(t.lifes).fill(0)),r(3),p(t.titleTxt),r(2),p(t.letters),r(4),p(t.wordTxt),r(),E("ngModel",t.userWord),r(3),p(t.songTxt),r(),E("ngModel",t.music),r(2),g("ngForOf",t.songs),r(2),p(t.sendTxt),r(),g("ngIf",t.won),r(),g("ngIf",t.lost),r(),g("ngIf",t.musicVideo))},dependencies:[J,G,H,q,N,j,D,B],styles:[".header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;margin:30px}h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{font-family:Ubuntu}.lifes-imgs[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.score[_ngcontent-%COMP%], .timer[_ngcontent-%COMP%]{font-size:30px}.score[_ngcontent-%COMP%], .letters-level[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:5px;background-color:#fff;border:none;border-radius:10px;width:auto;box-shadow:2px 2px 5px #0000004d;padding:10px;font-weight:700;width:fit-content;font-family:Ubuntu}.letters-level[_ngcontent-%COMP%]{font-size:40px}.game[_ngcontent-%COMP%], .end-screen[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;background-color:#fff;border:10px;border-color:var(--red);border-radius:10px;width:auto;box-shadow:2px 2px 5px #0000004d;padding:30px;margin:50px auto 30px;z-index:2;max-width:500px}.word-input[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;font-weight:700;justify-content:space-between}input[_ngcontent-%COMP%]{border-radius:15px;padding:10px;font-size:20px;width:55%}.letters-level[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:10px auto auto}.send-btn[_ngcontent-%COMP%]{display:flex;margin:auto;font-size:20px}.text[_ngcontent-%COMP%]{color:#fff;font-weight:bolder;margin:5px;-webkit-text-stroke:2px black}.end-screen[_ngcontent-%COMP%]{margin-top:-400px;z-index:200;background-color:var(--blue);color:#fff;position:relative;border:5px;border-color:var(--yellow);border-style:solid}ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}li[_ngcontent-%COMP%]{margin-bottom:10px;font-size:18px}.win-screen[_ngcontent-%COMP%]{border-color:#a8ff9d}.life[_ngcontent-%COMP%]{width:50px;height:auto;transition:transform 1s ease,filter .5s ease;transform-style:preserve-3d;position:relative}.life[_ngcontent-%COMP%]:hover{transform:rotateY(180deg)}label[_ngcontent-%COMP%]{font-size:20px;font-family:Ubuntu}.timer[_ngcontent-%COMP%]{width:150px;background-color:#fff;border:10px;border-color:var(--red);border-radius:10px;box-shadow:2px 2px 5px #0000004d;font-weight:bolder}#play[_ngcontent-%COMP%]{margin-top:30px}iframe[_ngcontent-%COMP%]{margin-bottom:30px}@media (max-width: 768px){.header[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:30px}}"],data:{animation:[M("fadeInOut",[v(":enter",[n({opacity:0,transform:"scale(0.9)"}),C("0.5s ease-out",n({opacity:1,transform:"scale(1)"}))]),v(":leave",[C("0.5s ease-in",n({opacity:0,transform:"scale(0.9)"}))])]),M("shakeAnimation",[v("* => shake",[C("15s",R([n({transform:"translate(2px, 2px) rotate(0deg)",offset:0}),n({transform:"translate(-2px, -2px) rotate(-1deg)",offset:.05}),n({transform:"translate(-4px, 0px) rotate(1deg)",offset:.1}),n({transform:"translate(4px, 2px) rotate(0deg)",offset:.15}),n({transform:"translate(2px, -2px) rotate(1deg)",offset:.2}),n({transform:"translate(-2px, 3px) rotate(-1deg)",offset:.25}),n({transform:"translate(-4px, 1px) rotate(0deg)",offset:.3}),n({transform:"translate(4px, 1px) rotate(-1deg)",offset:.35}),n({transform:"translate(-2px, -3px) rotate(1deg)",offset:.4}),n({transform:"translate(2px, 3px) rotate(0deg)",offset:.45}),n({transform:"translate(2px, -1px) rotate(-1deg)",offset:.5}),n({transform:"translate(-2px, 1px) rotate(1deg)",offset:.55}),n({transform:"translate(4px, -2px) rotate(0deg)",offset:.6}),n({transform:"translate(-4px, 2px) rotate(-1deg)",offset:.65}),n({transform:"translate(3px, 0px) rotate(1deg)",offset:.7}),n({transform:"translate(-3px, -2px) rotate(0deg)",offset:.75}),n({transform:"translate(3px, 1px) rotate(-1deg)",offset:.8}),n({transform:"translate(-3px, 3px) rotate(1deg)",offset:.85}),n({transform:"translate(1px, -1px) rotate(0deg)",offset:.9}),n({transform:"translate(-1px, 2px) rotate(-1deg)",offset:.95}),n({transform:"translate(2px, -2px) rotate(0deg)",offset:1})]))])])]}})}return a})();export{We as PlayComponentComponent};
