import{$ as f,A as y,B as _,C as c,D as m,F as A,G as k,H as E,I as L,J as N,L as D,M as z,N as B,Q as F,S as H,W as q,Z as $,aa as p,ba as u,c as v,ca as g,da as Y,ea as G,fa as K,ga as J,h as b,i as P,ia as Q,la as S,m as W,ma as w,n as R,o as r,oa as i,pa as V,q as T,qa as C,s as j,t as I,v as h,w as a,x as l,y as O,z as M}from"./chunk-TCC5DMIT.js";var tt=(o,x)=>({lang:o,vol:x});function et(o,x){o&1&&(a(0,"div",19),O(1,"img",20),l())}function nt(o,x){if(o&1){let t=M();a(0,"li")(1,"span",21),y("click",function(){let e=b(t).$implicit,s=_();return P(s.selectedSong(e))}),c(2),l()()}if(o&2){let t=x.$implicit;r(2),m(t)}}function it(o,x){if(o&1){let t=M();a(0,"div",22)(1,"h1"),c(2),l(),a(3,"button",15),y("click",function(){b(t);let e=_();return P(e.nextLevel())}),c(4),l()()}if(o&2){let t=_();h("@fadeInOut",void 0),r(2),m(t.winTxt),r(2),m(t.nextTxt)}}function rt(o,x){if(o&1){let t=M();a(0,"div",23)(1,"h1"),c(2),l(),a(3,"p"),c(4),l(),a(5,"button",15),y("click",function(){b(t);let e=_();return P(e.playAgain())}),c(6),l()()}if(o&2){let t=_();h("@fadeInOut",void 0),r(2),m(t.lostTxt),r(2),A("",t.lostScore," ",t.score),r(2),m(t.playAgainTxt)}}function st(o,x){if(o&1&&O(0,"iframe",24),o&2){let t=_();h("src",t.musicVideoSrc,W)}}var Rt=(()=>{class o{cookies;route;httpClient;sanitizer;constructor(t,n,e,s){this.cookies=t,this.route=n,this.httpClient=e,this.sanitizer=s,this.translate(),this.generateLetters(),this.musicVideoSrc=this.sanitizer.bypassSecurityTrustResourceUrl("")}language="EN";letters="";availableLetters="ABCDEFGHIJKLMNOPQRSTUVWXZ";userWord="";music="";lyrics="";autocompleteApiURL="/genius-api/search?q=";lyricsApiUrl="https://api.lyrics.ovh/v1";autocompleteResult={};songs=[];won=!1;lost=!1;score=0;lifes=3;minutes="00";seconds=60;animationState="none";musicVideo=!1;musicVideoSrc;volume=50;Array=Array;titleTxt=f.gameTitle;wordTxt=f.wordTxt;sendTxt=f.send;scoreTxt="Score:";winTxt=f.win;nextTxt=f.next;lostTxt=f.lostTitle;lostScore=f.scoreText;playAgainTxt=f.playAgain;songTxt=f.songTxt;surrenderTxt=f.surrenderTxt;ngOnInit(){this.route.queryParamMap.subscribe(t=>{let n=t.get("lang"),e=t.get("vol");this.language=n||localStorage.getItem("language")||"EN",this.volume=Number(e||localStorage.getItem("volume")||50),localStorage.setItem("language",this.language),localStorage.setItem("volume",this.volume.toString()),this.translate()}),this.translate(),this.timer()}timer(){return v(this,null,function*(){for(;this.seconds>0;)this.seconds<=10?this.animationState="shake":this.animationState="none",this.seconds--,yield new Promise(t=>setTimeout(t,1e3));this.lifes>1?(this.lifes--,this.animationState="none",yield new Promise(t=>setTimeout(t,2e3)),this.seconds=10,this.timer()):this.lost=!0})}translate(){this.language=="ES"||this.language=="Spanish"?(this.titleTxt=p.gameTitle,this.wordTxt=p.wordTxt,this.sendTxt=p.send,this.scoreTxt=p.score,this.winTxt=p.win,this.nextTxt=p.next,this.lostTxt=p.lostTitle,this.lostScore=p.scoreText,this.playAgainTxt=p.playAgain,this.songTxt=p.songTxt,this.surrenderTxt=p.surrenderTxt):this.language=="DE"||this.language=="German"?(this.titleTxt=u.gameTitle,this.wordTxt=u.wordTxt,this.sendTxt=u.send,this.scoreTxt=u.score,this.winTxt=u.win,this.nextTxt=u.next,this.lostTxt=u.lostTitle,this.lostScore=u.scoreText,this.playAgainTxt=u.playAgain,this.songTxt=u.songTxt,this.surrenderTxt=u.surrenderTxt):(this.language=="PT"||this.language=="Portuguese")&&(this.titleTxt=g.gameTitle,this.wordTxt=g.wordTxt,this.sendTxt=g.send,this.scoreTxt=g.score,this.winTxt=g.win,this.nextTxt=g.next,this.lostTxt=g.lostTitle,this.lostScore=g.scoreText,this.playAgainTxt=g.playAgain,this.songTxt=p.songTxt,this.surrenderTxt=g.surrenderTxt)}generateLetters(){this.letters+=this.availableLetters.charAt(Math.floor(Math.random()*this.availableLetters.length));let t=this.availableLetters.charAt(Math.floor(Math.random()*this.availableLetters.length));for(;this.letters.includes(t);)t=this.availableLetters.charAt(Math.floor(Math.random()*this.availableLetters.length));this.letters+=t}selectedSong(t){let n=this.generateLinkToLyricsAPI(t);this.getLyrics(n)}generateLinkToLyricsAPI(t){this.music=t,t=t.replace(/\s+/g," ").trim();let n=t.lastIndexOf(" by "),e=t.substring(0,n).trim().replace(/ /g,"-"),s=t.substring(n+4).trim().replace(/ /g,"-");return`${this.lyricsApiUrl}/${encodeURIComponent(s)}/${encodeURIComponent(e)}`}getLyrics(t){return v(this,null,function*(){return new Promise((n,e)=>{this.httpClient.get(t).subscribe({next:s=>{this.lyrics=s.lyrics.toUpperCase(),n()},error:s=>{this.music="",alert("Song not found!"),e(s)}})})})}autocompleteOVH(t){let n="https://api.lyrics.ovh/suggest/";n+=this.reformatAnswer(t),this.httpClient.get(n).subscribe({next:e=>{this.songs=e?.data?.filter(s=>!this.isAlternateVersion(s.title)).map(s=>{let d=s.title+" by "+s.artist.name;return d.endsWith(" by Najwa")&&(d=d.replace("Najwa","Najwa Nimri")),d})||[]},error:e=>{this.songs=[]}})}reformatAnswer(t){this.music=t,t=t.replace(/\s+/g," ").trim();let n=t.lastIndexOf(" by "),e=t.substring(0,n).trim().replace(/ /g,"-"),s=t.substring(n+4).trim().replace(/ /g,"-");return e+"-"+s}isAlternateVersion(t){return/\((.*?(live|remix|extended|version|19\d{2}|20\d{2}).*?)\)/i.test(t)}handleEnter(t){!this.won&&!this.lost&&this.checkUserInput(),this.won&&!this.lost&&this.nextLevel(),!this.won&&this.lost&&this.playAgain()}checkUserInput(){return v(this,null,function*(){if(this.userWord=this.userWord.split(" ")[0].toUpperCase(),this.lyrics=this.lyrics.toUpperCase(),this.lyrics===""){let t=this.generateLinkToLyricsAPI(this.music);try{yield this.getLyrics(t)}catch{return}}this.runChecks()})}searchVideo(){return v(this,null,function*(){let t=this.music;t=t.replace(/\s+/g," ").trim();let n=t.lastIndexOf(" by "),e=t.substring(0,n).trim().replace(/ /g,"-"),X=`https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&maxResults=1&q=${t.substring(n+4).trim().replace(/ /g,"-")+e}&key=AIzaSyBJnRvYAq8_-a5EfbVdHhMRCbBEBc2VatI`,U=yield(yield fetch(X)).json();if(U.items.length>0){let Z=U.items[0].id.videoId;this.sanitizer&&(this.musicVideoSrc=this.sanitizer.bypassSecurityTrustResourceUrl(`https://www.youtube.com/embed/${Z}?autoplay=0`),this.musicVideo=!0)}})}runChecks(){(!this.userWord.includes(this.letters.charAt(0))||!this.userWord.includes(this.letters.charAt(1)))&&alert("The word doesn't contain the letters"),this.lyrics.includes(this.userWord)||alert("The lyrics doesn't contain the word"),this.userWord.includes(this.letters.charAt(0))&&this.userWord.includes(this.letters.charAt(1))&&this.lyrics.includes(this.userWord)?(this.searchVideo(),this.won=!0,this.score+=10,this.seconds=60):(this.lifes=this.lifes-1,this.lifes==0&&(this.lost=!0,this.score=0))}nextLevel(){this.won=!1,this.resetLevel()}playAgain(){this.lost=!1,this.resetLevel(),this.score=0,this.lifes=3,this.musicVideo=!1,this.timer()}resetLevel(){this.userWord="",this.music="",this.lyrics="",this.letters="",this.songs=[],this.autocompleteResult={},this.seconds=60,this.generateLetters()}static \u0275fac=function(n){return new(n||o)(T(Y),T(q),T(F),T(H))};static \u0275cmp=j({type:o,selectors:[["app-play-component"]],hostBindings:function(n,e){n&1&&y("keydown.enter",function(d){return e.handleEnter(d)},R)},decls:32,vars:22,consts:[[1,"container"],["id","play","routerLink","/","queryParamsHandling","merge",1,"secondary-font",3,"queryParams"],[1,"header"],[1,"score"],[1,"timer"],[1,"lifes-imgs"],["class","lifes",4,"ngFor","ngForOf"],[1,"instruction"],[1,"text"],[1,"letters-level"],[1,"game"],[1,"word-input"],["type","text","autocomplete","off",3,"ngModelChange","ngModel"],["type","text","name","music","placeholder","Song by artist","autocomplete","off",3,"ngModelChange","input","ngModel"],[4,"ngFor","ngForOf"],[1,"send-btn",3,"click"],["class","end-screen win-screen",4,"ngIf"],["class","end-screen lost-screen",4,"ngIf"],["width","auto","frameborder","0",3,"src",4,"ngIf"],[1,"lifes"],["src","assets/heart.png","alt","heart-image",1,"life"],[3,"click"],[1,"end-screen","win-screen"],[1,"end-screen","lost-screen"],["width","auto","frameborder","0",3,"src"]],template:function(n,e){n&1&&(a(0,"div",0)(1,"button",1),c(2),l(),a(3,"div",2)(4,"p",3),c(5),l(),a(6,"div",4)(7,"p"),c(8),l()(),a(9,"div",5),I(10,et,2,0,"div",6),l()(),a(11,"div",7)(12,"h1",8),c(13),l(),a(14,"h2",9),c(15),l()(),a(16,"div",10)(17,"div",11)(18,"label"),c(19),l(),a(20,"input",12),L("ngModelChange",function(d){return E(e.userWord,d)||(e.userWord=d),d}),l()(),a(21,"div",11)(22,"label"),c(23),l(),a(24,"input",13),L("ngModelChange",function(d){return E(e.music,d)||(e.music=d),d}),y("input",function(){return e.autocompleteOVH(e.music)}),l()(),a(25,"ul"),I(26,nt,3,1,"li",14),l(),a(27,"button",15),y("click",function(){return e.checkUserInput()}),c(28),l()()(),I(29,it,5,3,"div",16)(30,rt,7,5,"div",17)(31,st,1,1,"iframe",18)),n&2&&(r(),h("queryParams",N(19,tt,e.language,e.volume)),r(),m(e.surrenderTxt),r(3),A("",e.scoreTxt," ",e.score),r(),h("@shakeAnimation",e.animationState),r(2),A("",e.minutes," : ",e.seconds<10?"0"+e.seconds:e.seconds),r(2),h("ngForOf",e.Array(e.lifes).fill(0)),r(3),m(e.titleTxt),r(2),m(e.letters),r(4),m(e.wordTxt),r(),k("ngModel",e.userWord),r(3),m(e.songTxt),r(),k("ngModel",e.music),r(2),h("ngForOf",e.songs),r(2),m(e.sendTxt),r(),h("ngIf",e.won),r(),h("ngIf",e.lost),r(),h("ngIf",e.musicVideo))},dependencies:[Q,G,K,J,B,D,z,$],styles:[".header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;margin:30px}h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{font-family:Ubuntu}.lifes-imgs[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.score[_ngcontent-%COMP%], .timer[_ngcontent-%COMP%]{font-size:30px}.score[_ngcontent-%COMP%], .letters-level[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:5px;background-color:#fff;border:none;border-radius:10px;width:auto;box-shadow:2px 2px 5px #0000004d;padding:10px;font-weight:700;width:fit-content;font-family:Ubuntu}.letters-level[_ngcontent-%COMP%]{font-size:40px}.game[_ngcontent-%COMP%], .end-screen[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;background-color:#fff;border:10px;border-color:var(--red);border-radius:10px;width:auto;box-shadow:2px 2px 5px #0000004d;padding:30px;margin:50px auto 30px;z-index:2;max-width:500px}.word-input[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;font-weight:700;justify-content:space-between}input[_ngcontent-%COMP%]{border-radius:15px;padding:10px;font-size:20px;width:55%}.letters-level[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:10px auto auto}.send-btn[_ngcontent-%COMP%]{display:flex;margin:auto;font-size:20px}.text[_ngcontent-%COMP%]{color:#fff;font-weight:bolder;margin:5px;-webkit-text-stroke:2px black}.end-screen[_ngcontent-%COMP%]{margin-top:-400px;z-index:200;background-color:var(--blue);color:#fff;position:relative;border:5px;border-color:var(--yellow);border-style:solid}ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}li[_ngcontent-%COMP%]{margin-bottom:10px;font-size:18px}.win-screen[_ngcontent-%COMP%]{border-color:#a8ff9d}.life[_ngcontent-%COMP%]{width:50px;height:auto;transition:transform 1s ease,filter .5s ease;transform-style:preserve-3d;position:relative}.life[_ngcontent-%COMP%]:hover{transform:rotateY(180deg)}label[_ngcontent-%COMP%]{font-size:20px;font-family:Ubuntu}.timer[_ngcontent-%COMP%]{width:150px;background-color:#fff;border:10px;border-color:var(--red);border-radius:10px;box-shadow:2px 2px 5px #0000004d;font-weight:bolder}#play[_ngcontent-%COMP%]{margin-top:30px}iframe[_ngcontent-%COMP%]{margin-bottom:30px}@media (max-width: 768px){.header[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:30px}}"],data:{animation:[S("fadeInOut",[C(":enter",[i({opacity:0,transform:"scale(0.9)"}),w("0.5s ease-out",i({opacity:1,transform:"scale(1)"}))]),C(":leave",[w("0.5s ease-in",i({opacity:0,transform:"scale(0.9)"}))])]),S("shakeAnimation",[C("* => shake",[w("15s",V([i({transform:"translate(2px, 2px) rotate(0deg)",offset:0}),i({transform:"translate(-2px, -2px) rotate(-1deg)",offset:.05}),i({transform:"translate(-4px, 0px) rotate(1deg)",offset:.1}),i({transform:"translate(4px, 2px) rotate(0deg)",offset:.15}),i({transform:"translate(2px, -2px) rotate(1deg)",offset:.2}),i({transform:"translate(-2px, 3px) rotate(-1deg)",offset:.25}),i({transform:"translate(-4px, 1px) rotate(0deg)",offset:.3}),i({transform:"translate(4px, 1px) rotate(-1deg)",offset:.35}),i({transform:"translate(-2px, -3px) rotate(1deg)",offset:.4}),i({transform:"translate(2px, 3px) rotate(0deg)",offset:.45}),i({transform:"translate(2px, -1px) rotate(-1deg)",offset:.5}),i({transform:"translate(-2px, 1px) rotate(1deg)",offset:.55}),i({transform:"translate(4px, -2px) rotate(0deg)",offset:.6}),i({transform:"translate(-4px, 2px) rotate(-1deg)",offset:.65}),i({transform:"translate(3px, 0px) rotate(1deg)",offset:.7}),i({transform:"translate(-3px, -2px) rotate(0deg)",offset:.75}),i({transform:"translate(3px, 1px) rotate(-1deg)",offset:.8}),i({transform:"translate(-3px, 3px) rotate(1deg)",offset:.85}),i({transform:"translate(1px, -1px) rotate(0deg)",offset:.9}),i({transform:"translate(-1px, 2px) rotate(-1deg)",offset:.95}),i({transform:"translate(2px, -2px) rotate(0deg)",offset:1})]))])])]}})}return o})();export{Rt as PlayComponentComponent};
