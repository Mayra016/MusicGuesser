import{$ as h,A as y,B as _,C as d,D as p,F as S,G as O,H as E,I as L,J as N,L as D,M as z,N as B,Q as F,S as $,W as q,Z as H,aa as c,ba as m,c as T,ca as f,da as Y,ea as G,fa as K,ga as J,h as b,i as P,ia as Q,la as A,m as R,ma as w,n as W,o as r,oa as i,pa as U,q as v,qa as C,s as j,t as M,v as u,w as a,x as l,y as k,z as I}from"./chunk-KHZLRTPS.js";var tt=(s,x)=>({lang:s,vol:x});function et(s,x){s&1&&(a(0,"div",19),k(1,"img",20),l())}function nt(s,x){if(s&1){let t=I();a(0,"li")(1,"span",21),y("click",function(){let e=b(t).$implicit,o=_();return P(o.selectedSong(e))}),d(2),l()()}if(s&2){let t=x.$implicit;r(2),p(t)}}function it(s,x){if(s&1){let t=I();a(0,"div",22)(1,"h1"),d(2),l(),a(3,"button",15),y("click",function(){b(t);let e=_();return P(e.nextLevel())}),d(4),l()()}if(s&2){let t=_();u("@fadeInOut",void 0),r(2),p(t.winTxt),r(2),p(t.nextTxt)}}function rt(s,x){if(s&1){let t=I();a(0,"div",23)(1,"h1"),d(2),l(),a(3,"p"),d(4),l(),a(5,"button",15),y("click",function(){b(t);let e=_();return P(e.playAgain())}),d(6),l()()}if(s&2){let t=_();u("@fadeInOut",void 0),r(2),p(t.lostTxt),r(2),S("",t.lostScore," ",t.score),r(2),p(t.playAgainTxt)}}function st(s,x){if(s&1&&k(0,"iframe",24),s&2){let t=_();u("src",t.musicVideoSrc,R)}}var Wt=(()=>{class s{cookies;route;httpClient;sanitizer;constructor(t,n,e,o){this.cookies=t,this.route=n,this.httpClient=e,this.sanitizer=o,this.translate(),this.generateLetters(),this.musicVideoSrc=this.sanitizer.bypassSecurityTrustResourceUrl("")}language="EN";letters="";availableLetters="ABCDEFGHIJKLMNOPQRSTUVWXZ";userWord="";music="";lyrics="";autocompleteApiURL="/genius-api/search?q=";lyricsApiUrl="https://api.lyrics.ovh/v1";autocompleteResult={};songs=[];won=!1;lost=!1;score=0;lifes=3;minutes="00";seconds=60;animationState="none";musicVideo=!1;musicVideoSrc;volume=50;Array=Array;titleTxt=h.gameTitle;wordTxt=h.wordTxt;sendTxt=h.send;scoreTxt="Score:";winTxt=h.win;nextTxt=h.next;lostTxt=h.lostTitle;lostScore=h.scoreText;playAgainTxt=h.playAgain;songTxt=h.songTxt;surrenderTxt=h.surrenderTxt;ngOnInit(){this.route.queryParamMap.subscribe(t=>{let n=t.get("lang"),e=t.get("vol");this.language=n||localStorage.getItem("language")||"EN",this.volume=Number(e||localStorage.getItem("volume")||50),localStorage.setItem("language",this.language),localStorage.setItem("volume",this.volume.toString()),this.translate()}),this.translate(),this.timer()}timer(){return T(this,null,function*(){for(;this.seconds>0;)this.seconds<=10?this.animationState="shake":this.animationState="none",this.seconds--,yield new Promise(t=>setTimeout(t,1e3));this.lifes>1?(this.lifes--,this.animationState="none",yield new Promise(t=>setTimeout(t,2e3)),this.seconds=10,this.timer()):this.lost=!0})}translate(){this.language=="ES"||this.language=="Spanish"?(this.titleTxt=c.gameTitle,this.wordTxt=c.wordTxt,this.sendTxt=c.send,this.scoreTxt=c.score,this.winTxt=c.win,this.nextTxt=c.next,this.lostTxt=c.lostTitle,this.lostScore=c.scoreText,this.playAgainTxt=c.playAgain,this.songTxt=c.songTxt,this.surrenderTxt=c.surrenderTxt):this.language=="DE"||this.language=="German"?(this.titleTxt=m.gameTitle,this.wordTxt=m.wordTxt,this.sendTxt=m.send,this.scoreTxt=m.score,this.winTxt=m.win,this.nextTxt=m.next,this.lostTxt=m.lostTitle,this.lostScore=m.scoreText,this.playAgainTxt=m.playAgain,this.songTxt=m.songTxt,this.surrenderTxt=m.surrenderTxt):(this.language=="PT"||this.language=="Portuguese")&&(this.titleTxt=f.gameTitle,this.wordTxt=f.wordTxt,this.sendTxt=f.send,this.scoreTxt=f.score,this.winTxt=f.win,this.nextTxt=f.next,this.lostTxt=f.lostTitle,this.lostScore=f.scoreText,this.playAgainTxt=f.playAgain,this.songTxt=c.songTxt,this.surrenderTxt=f.surrenderTxt)}generateLetters(){this.letters+=this.availableLetters.charAt(Math.floor(Math.random()*this.availableLetters.length));let t=this.availableLetters.charAt(Math.floor(Math.random()*this.availableLetters.length));for(;this.letters.includes(t);)t=this.availableLetters.charAt(Math.floor(Math.random()*this.availableLetters.length));this.letters+=t}selectedSong(t){let n=this.generateLinkToLyricsAPI(t);this.getLyrics(n)}generateLinkToLyricsAPI(t){this.music=t,t=t.replace(/\s+/g," ").trim();let n=t.lastIndexOf(" by "),e=t.substring(0,n).trim().replace(/ /g,"-"),o=t.substring(n+4).trim().replace(/ /g,"-");return`${this.lyricsApiUrl}/${encodeURIComponent(o)}/${encodeURIComponent(e)}`}getLyrics(t){return T(this,null,function*(){return new Promise((n,e)=>{this.httpClient.get(t).subscribe({next:o=>{this.lyrics=o.lyrics.toUpperCase(),n()},error:o=>{this.music="",alert("Song not found!"),e(o)}})})})}autocomplete(t){if(!t||t.trim()===""){this.songs=[];return}this.httpClient.get(`${this.autocompleteApiURL}${encodeURIComponent(t)}`).subscribe({next:n=>{this.songs=n?.response?.hits?.map(e=>{let o=e.result.title+" by "+e.result.artist_names;return o.endsWith(" by Najwa")&&(o=o.replace("Najwa","Najwa Nimri")),o})||[]},error:n=>{this.songs=[]}})}handleEnter(t){!this.won&&!this.lost&&this.checkUserInput(),this.won&&!this.lost&&this.nextLevel(),!this.won&&this.lost&&this.playAgain()}checkUserInput(){return T(this,null,function*(){if(this.userWord=this.userWord.split(" ")[0].toUpperCase(),this.lyrics=this.lyrics.toUpperCase(),this.lyrics===""){let t=this.generateLinkToLyricsAPI(this.music);try{yield this.getLyrics(t)}catch{return}}this.runChecks()})}searchVideo(){return T(this,null,function*(){let t=this.music;t=t.replace(/\s+/g," ").trim();let n=t.lastIndexOf(" by "),e=t.substring(0,n).trim().replace(/ /g,"-"),X=`https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&maxResults=1&q=${t.substring(n+4).trim().replace(/ /g,"-")+e}&key=AIzaSyBJnRvYAq8_-a5EfbVdHhMRCbBEBc2VatI`,V=yield(yield fetch(X)).json();if(V.items.length>0){let Z=V.items[0].id.videoId;this.sanitizer&&(this.musicVideoSrc=this.sanitizer.bypassSecurityTrustResourceUrl(`https://www.youtube.com/embed/${Z}?autoplay=0`),this.musicVideo=!0)}})}runChecks(){(!this.userWord.includes(this.letters.charAt(0))||!this.userWord.includes(this.letters.charAt(1)))&&alert("The word doesn't contain the letters"),this.lyrics.includes(this.userWord)||alert("The lyrics doesn't contain the word"),this.userWord.includes(this.letters.charAt(0))&&this.userWord.includes(this.letters.charAt(1))&&this.lyrics.includes(this.userWord)?(this.searchVideo(),this.won=!0,this.score+=10,this.seconds=60):(this.lifes=this.lifes-1,this.lifes==0&&(this.lost=!0,this.score=0))}nextLevel(){this.won=!1,this.resetLevel()}playAgain(){this.lost=!1,this.resetLevel(),this.score=0,this.lifes=3,this.musicVideo=!1,this.timer()}resetLevel(){this.userWord="",this.music="",this.lyrics="",this.letters="",this.songs=[],this.autocompleteResult={},this.seconds=60,this.generateLetters()}static \u0275fac=function(n){return new(n||s)(v(Y),v(q),v(F),v($))};static \u0275cmp=j({type:s,selectors:[["app-play-component"]],hostBindings:function(n,e){n&1&&y("keydown.enter",function(g){return e.handleEnter(g)},W)},decls:32,vars:22,consts:[[1,"container"],["id","play","routerLink","/","queryParamsHandling","merge",1,"secondary-font",3,"queryParams"],[1,"header"],[1,"score"],[1,"timer"],[1,"lifes-imgs"],["class","lifes",4,"ngFor","ngForOf"],[1,"instruction"],[1,"text"],[1,"letters-level"],[1,"game"],[1,"word-input"],["type","text","autocomplete","off",3,"ngModelChange","ngModel"],["type","text","name","music","placeholder","Song by artist","autocomplete","off",3,"ngModelChange","input","ngModel"],[4,"ngFor","ngForOf"],[1,"send-btn",3,"click"],["class","end-screen win-screen",4,"ngIf"],["class","end-screen lost-screen",4,"ngIf"],["width","auto","frameborder","0",3,"src",4,"ngIf"],[1,"lifes"],["src","assets/heart.png","alt","heart-image",1,"life"],[3,"click"],[1,"end-screen","win-screen"],[1,"end-screen","lost-screen"],["width","auto","frameborder","0",3,"src"]],template:function(n,e){n&1&&(a(0,"div",0)(1,"button",1),d(2),l(),a(3,"div",2)(4,"p",3),d(5),l(),a(6,"div",4)(7,"p"),d(8),l()(),a(9,"div",5),M(10,et,2,0,"div",6),l()(),a(11,"div",7)(12,"h1",8),d(13),l(),a(14,"h2",9),d(15),l()(),a(16,"div",10)(17,"div",11)(18,"label"),d(19),l(),a(20,"input",12),L("ngModelChange",function(g){return E(e.userWord,g)||(e.userWord=g),g}),l()(),a(21,"div",11)(22,"label"),d(23),l(),a(24,"input",13),L("ngModelChange",function(g){return E(e.music,g)||(e.music=g),g}),y("input",function(){return e.autocomplete(e.music)}),l()(),a(25,"ul"),M(26,nt,3,1,"li",14),l(),a(27,"button",15),y("click",function(){return e.checkUserInput()}),d(28),l()()(),M(29,it,5,3,"div",16)(30,rt,7,5,"div",17)(31,st,1,1,"iframe",18)),n&2&&(r(),u("queryParams",N(19,tt,e.language,e.volume)),r(),p(e.surrenderTxt),r(3),S("",e.scoreTxt," ",e.score),r(),u("@shakeAnimation",e.animationState),r(2),S("",e.minutes," : ",e.seconds<10?"0"+e.seconds:e.seconds),r(2),u("ngForOf",e.Array(e.lifes).fill(0)),r(3),p(e.titleTxt),r(2),p(e.letters),r(4),p(e.wordTxt),r(),O("ngModel",e.userWord),r(3),p(e.songTxt),r(),O("ngModel",e.music),r(2),u("ngForOf",e.songs),r(2),p(e.sendTxt),r(),u("ngIf",e.won),r(),u("ngIf",e.lost),r(),u("ngIf",e.musicVideo))},dependencies:[Q,G,K,J,B,D,z,H],styles:[".header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;margin:30px}h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{font-family:Ubuntu}.lifes-imgs[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.score[_ngcontent-%COMP%], .timer[_ngcontent-%COMP%]{font-size:30px}.score[_ngcontent-%COMP%], .letters-level[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:5px;background-color:#fff;border:none;border-radius:10px;width:auto;box-shadow:2px 2px 5px #0000004d;padding:10px;font-weight:700;width:fit-content;font-family:Ubuntu}.letters-level[_ngcontent-%COMP%]{font-size:40px}.game[_ngcontent-%COMP%], .end-screen[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;background-color:#fff;border:10px;border-color:var(--red);border-radius:10px;width:auto;box-shadow:2px 2px 5px #0000004d;padding:30px;margin:50px auto 30px;z-index:2;max-width:500px}.word-input[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;font-weight:700;justify-content:space-between}input[_ngcontent-%COMP%]{border-radius:15px;padding:10px;font-size:20px;width:55%}.letters-level[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:10px auto auto}.send-btn[_ngcontent-%COMP%]{display:flex;margin:auto;font-size:20px}.text[_ngcontent-%COMP%]{color:#fff;font-weight:bolder;margin:5px;-webkit-text-stroke:2px black}.end-screen[_ngcontent-%COMP%]{margin-top:-400px;z-index:200;background-color:var(--blue);color:#fff;position:relative;border:5px;border-color:var(--yellow);border-style:solid}ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}li[_ngcontent-%COMP%]{margin-bottom:10px;font-size:18px}.win-screen[_ngcontent-%COMP%]{border-color:#a8ff9d}.life[_ngcontent-%COMP%]{width:50px;height:auto;transition:transform 1s ease,filter .5s ease;transform-style:preserve-3d;position:relative}.life[_ngcontent-%COMP%]:hover{transform:rotateY(180deg)}label[_ngcontent-%COMP%]{font-size:20px;font-family:Ubuntu}.timer[_ngcontent-%COMP%]{width:150px;background-color:#fff;border:10px;border-color:var(--red);border-radius:10px;box-shadow:2px 2px 5px #0000004d;font-weight:bolder}#play[_ngcontent-%COMP%]{margin-top:30px}iframe[_ngcontent-%COMP%]{margin-bottom:30px}@media (max-width: 768px){.header[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:30px}}"],data:{animation:[A("fadeInOut",[C(":enter",[i({opacity:0,transform:"scale(0.9)"}),w("0.5s ease-out",i({opacity:1,transform:"scale(1)"}))]),C(":leave",[w("0.5s ease-in",i({opacity:0,transform:"scale(0.9)"}))])]),A("shakeAnimation",[C("* => shake",[w("15s",U([i({transform:"translate(2px, 2px) rotate(0deg)",offset:0}),i({transform:"translate(-2px, -2px) rotate(-1deg)",offset:.05}),i({transform:"translate(-4px, 0px) rotate(1deg)",offset:.1}),i({transform:"translate(4px, 2px) rotate(0deg)",offset:.15}),i({transform:"translate(2px, -2px) rotate(1deg)",offset:.2}),i({transform:"translate(-2px, 3px) rotate(-1deg)",offset:.25}),i({transform:"translate(-4px, 1px) rotate(0deg)",offset:.3}),i({transform:"translate(4px, 1px) rotate(-1deg)",offset:.35}),i({transform:"translate(-2px, -3px) rotate(1deg)",offset:.4}),i({transform:"translate(2px, 3px) rotate(0deg)",offset:.45}),i({transform:"translate(2px, -1px) rotate(-1deg)",offset:.5}),i({transform:"translate(-2px, 1px) rotate(1deg)",offset:.55}),i({transform:"translate(4px, -2px) rotate(0deg)",offset:.6}),i({transform:"translate(-4px, 2px) rotate(-1deg)",offset:.65}),i({transform:"translate(3px, 0px) rotate(1deg)",offset:.7}),i({transform:"translate(-3px, -2px) rotate(0deg)",offset:.75}),i({transform:"translate(3px, 1px) rotate(-1deg)",offset:.8}),i({transform:"translate(-3px, 3px) rotate(1deg)",offset:.85}),i({transform:"translate(1px, -1px) rotate(0deg)",offset:.9}),i({transform:"translate(-1px, 2px) rotate(-1deg)",offset:.95}),i({transform:"translate(2px, -2px) rotate(0deg)",offset:1})]))])])]}})}return s})();export{Wt as PlayComponentComponent};
