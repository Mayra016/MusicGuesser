import{$ as d,A as y,B as c,C as p,E as A,F as E,G as k,H as L,I as W,K as j,L as D,M as z,P as F,R as $,V as B,Y as q,_ as u,aa as h,ba as f,c as w,ca as H,da as G,ea as Y,fa as K,h as b,ha as J,i as P,ka as M,la as v,m as V,n as r,na as n,oa as R,p as T,pa as C,r as N,s as I,u as m,v as s,w as a,x as O,y as S,z as _}from"./chunk-LUDAOERN.js";var ee=(o,x)=>({lang:o,vol:x});function te(o,x){o&1&&(s(0,"div",19),O(1,"img",20),a())}function ne(o,x){if(o&1){let t=S();s(0,"li")(1,"span",21),_("click",function(){let e=b(t).$implicit,l=y();return P(l.selectedSong(e))}),c(2),a()()}if(o&2){let t=x.$implicit;r(2),p(t)}}function ie(o,x){if(o&1){let t=S();s(0,"div",22)(1,"h1"),c(2),a(),s(3,"button",15),_("click",function(){b(t);let e=y();return P(e.nextLevel())}),c(4),a()()}if(o&2){let t=y();m("@fadeInOut",void 0),r(2),p(t.winTxt),r(2),p(t.nextTxt)}}function re(o,x){if(o&1){let t=S();s(0,"div",23)(1,"h1"),c(2),a(),s(3,"p"),c(4),a(),s(5,"button",15),_("click",function(){b(t);let e=y();return P(e.playAgain())}),c(6),a()()}if(o&2){let t=y();m("@fadeInOut",void 0),r(2),p(t.lostTxt),r(2),A("",t.lostScore," ",t.score),r(2),p(t.playAgainTxt)}}function oe(o,x){if(o&1&&O(0,"iframe",24),o&2){let t=y();m("src",t.musicVideoSrc,V)}}var Ve=(()=>{class o{cookies;route;httpClient;sanitizer;constructor(t,i,e,l){this.cookies=t,this.route=i,this.httpClient=e,this.sanitizer=l,this.translate(),this.generateLetters(),this.musicVideoSrc=this.sanitizer.bypassSecurityTrustResourceUrl("")}language="EN";letters="";availableLetters="ABCDEFGHIJKLMNOPQRSTUVWXZ";userWord="";music="";lyrics="";autocompleteApiURL="/genius-api/search?q=";lyricsApiUrl="https://api.lyrics.ovh/v1";autocompleteResult={};songs=[];won=!1;lost=!1;score=0;lifes=3;minutes="00";seconds=60;animationState="none";musicVideo=!1;musicVideoSrc;volume=50;Array=Array;titleTxt=u.gameTitle;wordTxt=u.wordTxt;sendTxt=u.send;scoreTxt="Score:";winTxt=u.win;nextTxt=u.next;lostTxt=u.lostTitle;lostScore=u.scoreText;playAgainTxt=u.playAgain;songTxt=u.songTxt;surrenderTxt=u.surrenderTxt;ngOnInit(){this.route.queryParamMap.subscribe(t=>{let i=t.get("lang"),e=t.get("vol");this.language=i||localStorage.getItem("language")||"EN",this.volume=Number(e||localStorage.getItem("volume")||50),localStorage.setItem("language",this.language),localStorage.setItem("volume",this.volume.toString()),this.translate()}),this.translate(),this.timer()}timer(){return w(this,null,function*(){for(;this.seconds>0;)this.seconds<=10?this.animationState="shake":this.animationState="none",this.seconds--,yield new Promise(t=>setTimeout(t,1e3));this.lifes>1?(this.lifes--,this.animationState="none",yield new Promise(t=>setTimeout(t,2e3)),this.seconds=10,this.timer()):this.lost=!0})}translate(){this.language=="ES"||this.language=="Spanish"?(this.titleTxt=d.gameTitle,this.wordTxt=d.wordTxt,this.sendTxt=d.send,this.scoreTxt=d.score,this.winTxt=d.win,this.nextTxt=d.next,this.lostTxt=d.lostTitle,this.lostScore=d.scoreText,this.playAgainTxt=d.playAgain,this.songTxt=d.songTxt,this.surrenderTxt=d.surrenderTxt):this.language=="DE"||this.language=="German"?(this.titleTxt=h.gameTitle,this.wordTxt=h.wordTxt,this.sendTxt=h.send,this.scoreTxt=h.score,this.winTxt=h.win,this.nextTxt=h.next,this.lostTxt=h.lostTitle,this.lostScore=h.scoreText,this.playAgainTxt=h.playAgain,this.songTxt=d.songTxt,this.surrenderTxt=h.surrenderTxt):(this.language=="PT"||this.language=="Portuguese")&&(this.titleTxt=f.gameTitle,this.wordTxt=f.wordTxt,this.sendTxt=f.send,this.scoreTxt=f.score,this.winTxt=f.win,this.nextTxt=f.next,this.lostTxt=f.lostTitle,this.lostScore=f.scoreText,this.playAgainTxt=f.playAgain,this.songTxt=d.songTxt,this.surrenderTxt=f.surrenderTxt)}generateLetters(){this.letters+=this.availableLetters.charAt(Math.floor(Math.random()*this.availableLetters.length)),this.letters+=this.availableLetters.charAt(Math.floor(Math.random()*this.availableLetters.length))}selectedSong(t){let i=this.generateLinkToLyricsAPI(t);this.getLyrics(i)}generateLinkToLyricsAPI(t){this.music=t,t=t.replace(/\s+/g," ").trim();let i=t.lastIndexOf(" by "),e=t.substring(0,i).trim().replace(/ /g,"-"),l=t.substring(i+4).trim().replace(/ /g,"-");return console.log("M\xDASICA 0 "+l),console.log("M\xDASICA 1 "+e),console.log(`LINK ${this.lyricsApiUrl}/${encodeURIComponent(l)}/${encodeURIComponent(e)}`),`${this.lyricsApiUrl}/${encodeURIComponent(l)}/${encodeURIComponent(e)}`}getLyrics(t,i){this.httpClient.get(t).subscribe({next:e=>{this.lyrics=e.lyrics,console.log("HOLAAA"+this.lyrics)},error:e=>{this.music="",alert("Song not found!")}})}autocomplete(t){if(!t||t.trim()===""){this.songs=[];return}this.httpClient.get(`${this.autocompleteApiURL}${encodeURIComponent(t)}`).subscribe({next:i=>{console.log("API Response:",i.response.hits[0]),this.songs=i?.response?.hits?.map(e=>{let l=e.result.title+" by "+e.result.artist_names;return l.endsWith(" by Najwa")&&(l=l.replace("Najwa","Najwa Nimri")),l})||[]},error:i=>{console.error("API Error:",i),this.songs=[]}})}checkUserInput(){return w(this,null,function*(){if(this.userWord=this.userWord.split(" ")[0].toUpperCase(),this.lyrics=this.lyrics.toUpperCase(),console.log("SCORE ANTES"+this.userWord),this.lyrics==""){let t=this.generateLinkToLyricsAPI(this.music);yield this.getLyrics(t),this.runChecks()}else this.runChecks()})}searchVideo(){return w(this,null,function*(){console.log("SEARCHING VIDEO");let t=this.music;t=t.replace(/\s+/g," ").trim();let i=t.lastIndexOf(" by "),e=t.substring(0,i).trim().replace(/ /g,"-"),g=t.substring(i+4).trim().replace(/ /g,"-")+e,Q="AIzaSyBJnRvYAq8_-a5EfbVdHhMRCbBEBc2VatI";console.log(g);let X=`https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&maxResults=1&q=${g}&key=${Q}`,U=yield(yield fetch(X)).json();if(U.items.length>0){let Z=U.items[0].id.videoId;this.sanitizer&&(this.musicVideoSrc=this.sanitizer.bypassSecurityTrustResourceUrl(`https://www.youtube.com/embed/${Z}?autoplay=0`),console.log(this.musicVideoSrc),this.musicVideo=!0)}})}runChecks(){(!this.userWord.includes(this.letters.charAt(0))||!this.userWord.includes(this.letters.charAt(1)))&&alert("The word doesn't contain the letters"),this.lyrics.includes(this.userWord)||alert("The lyrics doesn't contain the word"),this.userWord.includes(this.letters.charAt(0))&&this.userWord.includes(this.letters.charAt(1))&&this.lyrics.includes(this.userWord)?(this.searchVideo(),this.won=!0,this.score+=10,this.seconds=60):(this.lifes=this.lifes-1,this.lifes==0&&(this.lost=!0,this.score=0)),console.log("SCORE DESPU\xC9S"+this.score)}nextLevel(){this.won=!1,this.resetLevel()}playAgain(){this.lost=!1,this.resetLevel(),this.score=0,this.lifes=3,this.musicVideo=!1,this.timer()}resetLevel(){this.userWord="",this.music="",this.lyrics="",this.letters="",this.songs=[],this.autocompleteResult={},this.seconds=60,this.generateLetters()}static \u0275fac=function(i){return new(i||o)(T(H),T(B),T(F),T($))};static \u0275cmp=N({type:o,selectors:[["app-play-component"]],decls:32,vars:22,consts:[[1,"container"],["id","play","routerLink","/","queryParamsHandling","merge",1,"secondary-font",3,"queryParams"],[1,"header"],[1,"score"],[1,"timer"],[1,"lifes-imgs"],["class","lifes",4,"ngFor","ngForOf"],[1,"instruction"],[1,"text"],[1,"letters-level"],[1,"game"],[1,"word-input"],["type","text","autocomplete","off",3,"ngModelChange","ngModel"],["type","text","name","music","placeholder","Song by artist","autocomplete","off",3,"ngModelChange","input","ngModel"],[4,"ngFor","ngForOf"],[1,"send-btn",3,"click"],["class","end-screen win-screen",4,"ngIf"],["class","end-screen lost-screen",4,"ngIf"],["width","auto","frameborder","0",3,"src",4,"ngIf"],[1,"lifes"],["src","assets/heart.png","alt","heart-image",1,"life"],[3,"click"],[1,"end-screen","win-screen"],[1,"end-screen","lost-screen"],["width","auto","frameborder","0",3,"src"]],template:function(i,e){i&1&&(s(0,"div",0)(1,"button",1),c(2),a(),s(3,"div",2)(4,"p",3),c(5),a(),s(6,"div",4)(7,"p"),c(8),a()(),s(9,"div",5),I(10,te,2,0,"div",6),a()(),s(11,"div",7)(12,"h1",8),c(13),a(),s(14,"h2",9),c(15),a()(),s(16,"div",10)(17,"div",11)(18,"label"),c(19),a(),s(20,"input",12),L("ngModelChange",function(g){return k(e.userWord,g)||(e.userWord=g),g}),a()(),s(21,"div",11)(22,"label"),c(23),a(),s(24,"input",13),L("ngModelChange",function(g){return k(e.music,g)||(e.music=g),g}),_("input",function(){return e.autocomplete(e.music)}),a()(),s(25,"ul"),I(26,ne,3,1,"li",14),a(),s(27,"button",15),_("click",function(){return e.checkUserInput()}),c(28),a()()(),I(29,ie,5,3,"div",16)(30,re,7,5,"div",17)(31,oe,1,1,"iframe",18)),i&2&&(r(),m("queryParams",W(19,ee,e.language,e.volume)),r(),p(e.surrenderTxt),r(3),A("",e.scoreTxt," ",e.score),r(),m("@shakeAnimation",e.animationState),r(2),A("",e.minutes," : ",e.seconds<10?"0"+e.seconds:e.seconds),r(2),m("ngForOf",e.Array(e.lifes).fill(0)),r(3),p(e.titleTxt),r(2),p(e.letters),r(4),p(e.wordTxt),r(),E("ngModel",e.userWord),r(3),p(e.songTxt),r(),E("ngModel",e.music),r(2),m("ngForOf",e.songs),r(2),p(e.sendTxt),r(),m("ngIf",e.won),r(),m("ngIf",e.lost),r(),m("ngIf",e.musicVideo))},dependencies:[J,G,Y,K,z,j,D,q],styles:[".header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;margin:30px}h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{font-family:Ubuntu}.lifes-imgs[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.score[_ngcontent-%COMP%], .timer[_ngcontent-%COMP%]{font-size:30px}.score[_ngcontent-%COMP%], .letters-level[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:5px;background-color:#fff;border:none;border-radius:10px;width:auto;box-shadow:2px 2px 5px #0000004d;padding:10px;font-weight:700;width:fit-content;font-family:Ubuntu}.letters-level[_ngcontent-%COMP%]{font-size:40px}.game[_ngcontent-%COMP%], .end-screen[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;background-color:#fff;border:10px;border-color:var(--red);border-radius:10px;width:auto;box-shadow:2px 2px 5px #0000004d;padding:30px;margin:50px auto 30px;z-index:2;max-width:500px}.word-input[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;font-weight:700;justify-content:space-between}input[_ngcontent-%COMP%]{border-radius:15px;padding:10px;font-size:20px;width:55%}.letters-level[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:10px auto auto}.send-btn[_ngcontent-%COMP%]{display:flex;margin:auto;font-size:20px}.text[_ngcontent-%COMP%]{color:#fff;font-weight:bolder;margin:5px;-webkit-text-stroke:2px black}.end-screen[_ngcontent-%COMP%]{margin-top:-400px;z-index:200;background-color:var(--blue);color:#fff;position:relative;border:5px;border-color:var(--yellow);border-style:solid}ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}li[_ngcontent-%COMP%]{margin-bottom:10px;font-size:18px}.win-screen[_ngcontent-%COMP%]{border-color:#a8ff9d}.life[_ngcontent-%COMP%]{width:50px;height:auto;transition:transform 1s ease,filter .5s ease;transform-style:preserve-3d;position:relative}.life[_ngcontent-%COMP%]:hover{transform:rotateY(180deg)}label[_ngcontent-%COMP%]{font-size:20px;font-family:Ubuntu}.timer[_ngcontent-%COMP%]{width:150px;background-color:#fff;border:10px;border-color:var(--red);border-radius:10px;box-shadow:2px 2px 5px #0000004d;font-weight:bolder}#play[_ngcontent-%COMP%]{margin-top:30px}iframe[_ngcontent-%COMP%]{margin-bottom:30px}@media (max-width: 768px){.header[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:30px}}"],data:{animation:[M("fadeInOut",[C(":enter",[n({opacity:0,transform:"scale(0.9)"}),v("0.5s ease-out",n({opacity:1,transform:"scale(1)"}))]),C(":leave",[v("0.5s ease-in",n({opacity:0,transform:"scale(0.9)"}))])]),M("shakeAnimation",[C("* => shake",[v("15s",R([n({transform:"translate(2px, 2px) rotate(0deg)",offset:0}),n({transform:"translate(-2px, -2px) rotate(-1deg)",offset:.05}),n({transform:"translate(-4px, 0px) rotate(1deg)",offset:.1}),n({transform:"translate(4px, 2px) rotate(0deg)",offset:.15}),n({transform:"translate(2px, -2px) rotate(1deg)",offset:.2}),n({transform:"translate(-2px, 3px) rotate(-1deg)",offset:.25}),n({transform:"translate(-4px, 1px) rotate(0deg)",offset:.3}),n({transform:"translate(4px, 1px) rotate(-1deg)",offset:.35}),n({transform:"translate(-2px, -3px) rotate(1deg)",offset:.4}),n({transform:"translate(2px, 3px) rotate(0deg)",offset:.45}),n({transform:"translate(2px, -1px) rotate(-1deg)",offset:.5}),n({transform:"translate(-2px, 1px) rotate(1deg)",offset:.55}),n({transform:"translate(4px, -2px) rotate(0deg)",offset:.6}),n({transform:"translate(-4px, 2px) rotate(-1deg)",offset:.65}),n({transform:"translate(3px, 0px) rotate(1deg)",offset:.7}),n({transform:"translate(-3px, -2px) rotate(0deg)",offset:.75}),n({transform:"translate(3px, 1px) rotate(-1deg)",offset:.8}),n({transform:"translate(-3px, 3px) rotate(1deg)",offset:.85}),n({transform:"translate(1px, -1px) rotate(0deg)",offset:.9}),n({transform:"translate(-1px, 2px) rotate(-1deg)",offset:.95}),n({transform:"translate(2px, -2px) rotate(0deg)",offset:1})]))])])]}})}return o})();export{Ve as PlayComponentComponent};
